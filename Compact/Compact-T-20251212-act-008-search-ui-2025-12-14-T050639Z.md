# Compact — T-20251212-act-008-search-ui

## Scope
- Subtask: `T-20251212-act-008-search-ui`（实现前端搜索框与结果定位）
- Type: build, Priority: P1, Lane: next
- Dependencies: `T-20251212-act-004-spa-shell`、`T-20251212-act-008-search-api`（已完成）
- Acceptance (record.json):
  - 全局搜索框可随时输入关键字
  - 展示匹配结果并可点击跳转到对应视图/位置
  - 清空搜索恢复原列表

## Changes（代码落点）
- `frontend/spa/index.html`
  - Topbar 新增全局搜索表单：输入框 + 清空按钮 + 结果面板容器
- `frontend/spa/app.js`
  - 新增全局搜索逻辑：`GET /api/search`（160ms debounce）+ 结果下拉渲染
  - 点击结果 → 路由跳转 + 滚动/聚焦定位；图片/视频结果自动打开对应 Overlay
  - 快捷键：`/` 或 `Ctrl/Cmd+K` 聚焦搜索；`Esc` 清空并关闭结果面板
- `frontend/spa/styles.css`
  - 新增搜索框与下拉结果样式（sticky topbar 下可用、窄屏 wrap）
  - 新增 `is-search-focus` 高亮动画与 `scroll-margin-top`，避免被顶部栏遮挡

## Behavior（用户可见）
- 输入关键字后触发 `/api/search?q=...&limit=50`，下拉展示 `Album/Image/Video/Game/Other` 结果。
- 点击（或 Enter 选择首条）后定位策略：
  - Album → `/images` 并滚动/聚焦到对应相册卡片
  - Image（相册内）→ `/images` 聚焦相册卡片并在 Overlay 中打开命中的图片
  - Image（散图）→ `/scattered` 聚焦缩略图并在 Overlay 中打开命中的图片
  - Video → `/videos` 聚焦卡片并在 Overlay 中打开命中的视频
  - Game/Other → `/games` 或 `/others` 聚焦对应表格行
- 清空搜索（✕ / Esc）后隐藏下拉面板，原视图列表保持不变（恢复原列表）。

## Notes / Limits（显式边界）
- 结果排序/匹配由后端决定；前端不做相关性评分与分页。
- 下拉面板暂未实现方向键逐条选择（Enter 默认选择首条）。

## Self-test
- `python3 -m unittest -q` → OK（28 tests）

